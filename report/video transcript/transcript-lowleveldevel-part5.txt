Raspberry Pi Bare Metal Tutorial - Part 5 - YouTube
https://www.youtube.com/watch?v=apuqB0-D7Dk

Transcript:
(00:01) hi and welcome back in our previous video we finished up the code for the mini uart and the linker script and then this video we're going to start setting up the sd card so i'm going to walk you through downloading the raspberry pi os creating an sd card from it and so you can actually start testing and uh running this code so let's get started first we're gonna go to the raspberry pi website and actually download the uh raspbian well formerly known as raspy and raspberry pi os for me i'm going to take the light
(00:37) version here and just download it i'll put the link here in the description so go ahead and download and save the it's going to download as a zip file so just download and save it and once once we've downloaded it we're going to go here to the terminal and unzip the file with the unzip command see here 2020 there we go and so this is only going to take less than a few minutes depending on the speed of your machine of course we're just gonna unpack this dot image file so we can write this file to the disk
(01:18) and let's look here if we have it there we go the 2020 raspbian buster light image file so we're going to use the dd command and if we do lsblk we can see this is our sd card that i inserted make sure you get the right one if you do this next one wrong you could destroy your hard drive so i know sdb is the right drive so if we do sudo dd the in file is the image the out file is going to be our dev slash sdb we don't use sdb1 just sdb for the full disk and then let's uh also include a block size of four megabytes because by
(02:00) default it's 512 bytes and that's that'll make it take a long time so this dd command is going to take quite a while to run depending on your machine it could be five minutes it could be 30 minutes depending on how slow your machine is so just be patient give it some time there are some alternate alternative commands you can run to show progress and stuff depending on the distribution you have so here we go it once it's done if we run lsblk again we'll see i have now i have two partitions sdb1
(02:34) and sdb2 let me go ahead and uh open these in the file manager so boot yeah so you have your boot partition right there that's the one we want if i do lsblk again i'll see it's mounted now you might have to mount it a specific way in your own distribution so let me make clean again so now i'm going to make and we built the raspberry pi 4 image and it copied the files correctly to the boot let me go ahead and actually create one for the rp3 as well and we can just include the rpi version equals 3 and then make well it's clean first
(03:20) make and that'll automatically put the version three in our config so there we go now we have both of them copied to that boot media so now i'm gonna show you what i'm using for ttl i'll put this link in the comments as well and this link is actually an ad link so if you use this it benefits the channel so this is a usb ttl serial cable and this one comes in a three pack for only 10 bucks it's a good deal um sometimes one of them will be bad so it's usually good to get more than one i've broken a couple
(03:58) from just over using them so if we look at this elinics.org here's a little pin out you can see we have the black the white and the green on this third fourth and fifth pin and you can actually hook the red one to the first pin to power it if it's the raspberry pi 3 won't work on the four so here's how we can see our tty usb is once it's connected and we're going to run this screen command to actually connect to the serial terminal so ls ls tty usb yep that's that's it you just want to make sure you
(04:38) got it on there and available so i'm going to run the screen command with sudo on that port with the baud rate 11 5200 now we'll see some initial output from the debug from from the raspberry pi hardware and then we see right here raspberry pi bare metal os initializing board raspberry pi 3 and done you'll see if i type some characters it's reading and sending back the output so let's go ahead and i'll hook up my raspberry pi 4 and do the same thing let me just clear here so i'll run the same command right now i
(05:19) have it hooked up to my raspberry pi 4 and the plug the disc into that and now i'm starting it up and you can see the debug output's a little bit different but here we have raspberry pi bare metal os initializing and board raspberry pi 4 done and again of course if we type it's echoing the output from it so there you have it um that's basically the whole run through of how to start a bare metal project get everything connected set up the sd card and actually run and connect to it with um being able to see the output so
(05:58) this will this is the end of this first set of videos on this topic i'm probably going to add a few more i might you know add some things related to some of sergey's other tutorials i may create some drivers for other types of devices and if you guys out there have any ideas things you want me to demonstrate on here or if you have any questions just put put them in the comments section i'll be glad to answer what i can and um for now um thanks for watching this tutorial set and i'll see you in the next video that i
(06:35) create i'm not sure how long it'll be but it'll be fairly soon so thanks again like comment subscribe if you enjoyed it
